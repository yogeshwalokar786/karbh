(function($){"use strict";$(window).on('load',function(){$(".audioPlayer").toArray().forEach(function(player){var audio=$(player).find("audio")[0];var seekbarInner=$(player).find(".seekBar .inner");var seekbarOuter=$(player).find(".seekBar .outer");var volumeControl=$(player).find(".volumeControl .wrapper");var length;var interval;var seekBarPercentage;var volumePercentage;var minutes=parseInt(audio.duration/60,10);var seconds=parseInt(audio.duration%60);$(player).find(".timing .end").text(minutes+":"+seconds);var getPercentage=function(presentTime,totalLength){var calcPercentage=(presentTime/totalLength)*100;return parseFloat(calcPercentage.toString());};var updateSeekBar=function(){seekBarPercentage=getPercentage(audio.currentTime.toFixed(2),length.toFixed(2));$(seekbarInner).css("width",seekBarPercentage+"%");$(player).find(".timing .start").text(parseInt(audio.currentTime/60,10)+':'+parseInt(audio.currentTime%60));};$(player).find(".btn").on("click",function(){var _button=$(this);if(_button.hasClass("play")){_button.removeClass("play").addClass("pause");length=audio.duration;audio.play();interval=setInterval(function(){if(!audio.paused){updateSeekBar();}
if(audio.ended){clearInterval(interval);$(player).find(".albumArt");_button.removeClass("pause").addClass("play");seekbarInner.width(100+"%");$(player).find(".timing .start").text('0:00');}},1000);}else if(_button.hasClass("pause")){_button.removeClass("pause").addClass("play");audio.pause();}
$(player).find(".albumArt")});seekbarOuter.on("click",function(e){if(!audio.ended&&length!==undefined){var seekPosition=e.pageX-$(seekbarOuter).offset().left;if(seekPosition>=0){audio.currentTime=(seekPosition*audio.duration)/$(seekbarOuter).width();updateSeekBar();}}});volumeControl.find(".outer").on("click",function(e){var volumePosition=e.pageX-$(this).offset().left;var audioVolume=volumePosition/$(this).width();if(audioVolume>=0&&audioVolume<=1){audio.volume=audioVolume;$(this).find(".inner").css("width",audioVolume*100+"%");}});var updateVolume=function(){volumePercentage=getPercentage(audio.volume,1);$(volumeControl).find(".inner").css("width",volumePercentage+"%");};});});})(jQuery);